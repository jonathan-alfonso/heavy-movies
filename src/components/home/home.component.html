<app-landing></app-landing>

<div class="container">
  <section class="movies-container">
    
    <div class="card-tab">
      <mat-tab-group (selectedTabChange)="tabMoviesChange($event)" [selectedIndex]="moviesTab" mat-stretch-tabs="false" mat-align-tabs="end">
        @for (tab of movieTabList; track tab) {
          <mat-tab [label]="tab" class="card-tab">
            <div class="card-container">
              @if (moviesTab == 0) {
                @for (nowPlaying of nowPlayingMovies; track nowPlaying.id) {
                  <div class="card">
                    <a [routerLink]="'/movie/' + nowPlaying.id" [title]="nowPlaying.title">
                      <img 
                      class="card-poster" 
                      loading="lazy" 
                      [ngSrc]="posterUrl + nowPlaying.poster_path" 
                      srcset="{{posterUrl + nowPlaying.poster_path}} 1x, {{zoomedUrl + nowPlaying.poster_path}} 2x"
                      [alt]="nowPlaying.title"
                      [height]="239"
                      [width]="159"
                      />
                    </a>
                    <a [routerLink]="'/movie/' + nowPlaying.id" [title]="nowPlaying.title" class="card-title">
                      {{ nowPlaying.title }}
                    </a>
                    <p class="card-date">{{ nowPlaying.release_date | date: 'dd/MM/yyyy' }}</p>
                  </div>
                }
              } @else if (moviesTab == 1) {
                @for (popular of popularMovies; track popular.id) {
                  <div class="card">
                    <a [routerLink]="'/movie/' + popular.id" [title]="popular.title">
                      <img 
                      class="card-poster" 
                      loading="lazy" 
                      [ngSrc]="posterUrl + popular.poster_path" 
                      srcset="{{posterUrl + popular.poster_path}} 1x, {{zoomedUrl + popular.poster_path}} 2x"
                      [alt]="popular.title"
                      [height]="239"
                      [width]="159"
                      />
                    </a>
                    <a [routerLink]="'/movie/' + popular.id" [title]="popular.title" class="card-title">
                      {{ popular.title }}
                    </a>
                    <p class="card-date">{{ popular.release_date | date: 'dd/MM/yyyy' }}</p>
                  </div>
                }
              } @else if (moviesTab == 2) {
                @for (upcoming of upcomingMovies; track upcoming.id) {
                  <div class="card">
                    <a [routerLink]="'/movie/' + upcoming.id" [title]="upcoming.title">
                      <img 
                      class="card-poster" 
                      loading="lazy" 
                      [ngSrc]="posterUrl + upcoming.poster_path" 
                      srcset="{{posterUrl + upcoming.poster_path}} 1x, {{zoomedUrl + upcoming.poster_path}} 2x"
                      [alt]="upcoming.title"
                      [height]="239"
                      [width]="159"
                      />
                    </a>
                    <a [routerLink]="'/movie/' + upcoming.id" [title]="upcoming.title" class="card-title">
                      {{ upcoming.title }}
                    </a>
                    <p class="card-date">{{ upcoming.release_date | date: 'dd/MM/yyyy' }}</p>
                  </div>
                }
              } @else if (moviesTab == 3) {
                @for (topRated of topRatedMovies; track topRated.id) {
                  <div class="card">
                    <button mat-mini-fab color="accent" aria-label="Note" class="btn-rating">
                      {{ topRated.vote_average | number: '1.1-1'}}
                    </button>
                    <a [routerLink]="'/movie/' + topRated.id" [title]="topRated.title">
                      <img 
                      class="card-poster" 
                      loading="lazy" 
                      [ngSrc]="posterUrl + topRated.poster_path" 
                      srcset="{{posterUrl + topRated.poster_path}} 1x, {{zoomedUrl + topRated.poster_path}} 2x"
                      [alt]="topRated.title"
                      [height]="239"
                      [width]="159"
                      />
                    </a>
                    <a [routerLink]="'/movie/' + topRated.id" [title]="topRated.title" class="card-title">
                      {{ topRated.title }}
                    </a>
                    <p class="card-date">{{ topRated.release_date | date: 'dd/MM/yyyy' }}</p>
                  </div>
                }
              }
            </div>
          </mat-tab>
        } @empty {
          Liste vide
        }
      </mat-tab-group>
    </div>
    <app-footer></app-footer>
  </section>
</div>